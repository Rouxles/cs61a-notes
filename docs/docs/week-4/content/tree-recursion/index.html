<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Tree Recursion#Order of Recursive Calls#If you know the behaviour of environment diagrams, you could derive the behaviour of recursive calls.
Recaling how environment diagrams behave, a new frame is opened when a user-defined function call occurs, meaning that whenever a recursive function is called on a non-base case scenario, a new frame is opened, and that frame will be evaluated.
As a result, in a tree recursive return value (more on that later), for example recursive(3) &#43; recursive(4), the whole value of recursive(3) is evaluated first before recursive(4) is evaluated (due to the order of operations of Python).">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="Tree Recursion" />
<meta property="og:description" content="Tree Recursion#Order of Recursive Calls#If you know the behaviour of environment diagrams, you could derive the behaviour of recursive calls.
Recaling how environment diagrams behave, a new frame is opened when a user-defined function call occurs, meaning that whenever a recursive function is called on a non-base case scenario, a new frame is opened, and that frame will be evaluated.
As a result, in a tree recursive return value (more on that later), for example recursive(3) &#43; recursive(4), the whole value of recursive(3) is evaluated first before recursive(4) is evaluated (due to the order of operations of Python)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cs61a.rouxl.es/docs/week-4/content/tree-recursion/" /><meta property="article:section" content="docs" />



<title>Tree Recursion | CS61A-Notes</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.53a5dbabc20bef689642d11498e1d272a687a7fcab9f3044da32a395789d5002.css" integrity="sha256-U6Xbq8IL72iWQtEUmOHScqaHp/yrnzBE2jKjlXidUAI=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.d6766f8c64537f5000223a01a8cf41fbb48efae827cc2d95a6c465efc9a56d31.js" integrity="sha256-1nZvjGRTf1AAIjoBqM9B&#43;7SO&#43;ugnzC2VpsRl78mlbTE=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>CS61A-Notes</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  



  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 1</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-1/content/introduction/" class="">Introduction to the Basics of Python</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 2</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-2/content/control/" class="">Control</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-2/content/higher-order-functions/" class="">Higher Order Functions</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-2/content/environment/" class="">Environment Diagrams</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 3</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-3/content/design/" class="">Design</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-3/content/decorators/" class="">Decorators</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 4</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-4/content/recursion/" class="">Recursion</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-4/content/tree-recursion/" class=" active">Tree Recursion</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 5</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-5/content/containers/" class="">Containers</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-5/content/sequences/" class="">Sequences</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-5/content/data-abstraction/" class="">Data Abstraction &#43; Dictionaries</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 6</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-6/content/trees/" class="">Trees</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-6/content/mutability/" class="">Mutability</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 7</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-7/content/iterators/" class="">Iterators</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Tree Recursion</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#order-of-recursive-calls">Order of Recursive Calls</a></li>
    <li><a href="#tree-recursion-1">Tree Recursion</a>
      <ul>
        <li><a href="#fibonacci-numbers">Fibonacci Numbers</a></li>
      </ul>
    </li>
    <li><a href="#counting-partitions">Counting Partitions</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="tree-recursion">
  Tree Recursion
  <a class="anchor" href="#tree-recursion">#</a>
</h1>
<h2 id="order-of-recursive-calls">
  Order of Recursive Calls
  <a class="anchor" href="#order-of-recursive-calls">#</a>
</h2>
<p>If you know the behaviour of environment diagrams, you could derive the behaviour of recursive calls.</p>
<p>Recaling how environment diagrams behave, a new frame is opened when a user-defined function call occurs, meaning that whenever a recursive function is called on a non-base case scenario, a new frame is opened, and that frame will be evaluated.</p>
<p>As a result, in a tree recursive return value (more on that later), for example <code>recursive(3) + recursive(4)</code>, the whole value of <code>recursive(3)</code> is evaluated first before <code>recursive(4)</code> is evaluated (due to the order of operations of Python).</p>
<h2 id="tree-recursion-1">
  Tree Recursion
  <a class="anchor" href="#tree-recursion-1">#</a>
</h2>
<p>Tree recursion occurs when a recursive function makes <strong>more than one recursive call</strong>, thus creating a sort of network of sorts of recursive calls that is sort of shaped like the roots of a tree.</p>
<h3 id="fibonacci-numbers">
  Fibonacci Numbers
  <a class="anchor" href="#fibonacci-numbers">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">fib</span>(n):
    <span style="color:#66d9ef">if</span> n <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">0</span>:
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">elif</span> n <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>:
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>
    <span style="color:#66d9ef">return</span> fib(n <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span> fib (n <span style="color:#f92672">-</span> <span style="color:#ae81ff">2</span>)

fib(<span style="color:#ae81ff">3</span>)
</code></pre></div><p>As you can see in the example above, the recursive call returns two instances of the same function, thus creating a structure that calls itself multiple times in a sort of tree-like fashion (as seen in the image below)</p>
<p><img src="https://i.imgur.com/IKrvPha.png" alt="Image of tree-like structure" /></p>
<p>Notice how this is pretty inefficient though! There are multiple calls to <code>fib(1)</code>, so that function would need to be evaluated multiple times (and this redundant execution would get executed more if we started with <code>fib(4)</code> for instance). There are ways to alleviate this (to a certain extent), but</p>
<h2 id="counting-partitions">
  Counting Partitions
  <a class="anchor" href="#counting-partitions">#</a>
</h2>
<p>The solution to this classic tree recursion problem has a structure that can be used in other tree recursive problems — it&rsquo;s worth truly understanding how it works.</p>
<p>The question is defined as follows:</p>
<p>Count the number of possible partitions with positive integers <code>n</code>, using parts up to size <code>m</code>.</p>
<p>This problem has two distinct parts, one part calculating the possibilities with the current size <code>m</code>, and the other part calculating the possibilities with smaller part sizes <code>m - 1</code> in a recursive manner.</p>
<p>For example, for <code>count_partitions(4, 3)</code>, you could have the following outcomes:</p>
<pre><code>3 1

2 2
2 1 1

1 1 1 1
</code></pre><p>Which would return 4 as those are the total number of possibilities. Each line break represents a different path for the recursive solution.</p>
<p>In general, the recursive call can be generalized as follows <code>count_partitions(n - m, m) + count_partitions(n, m - 1)</code> which essentially is adding up the recursive function for the case where <code>m</code> is used, and the case where <code>m</code> is not used. After we have this logic, we just need to come up with the base cases, and assume that our recursive solution will work.</p>
<p>For our base cases, we know that if <code>n</code> is ever negative, there will be no possible results, and if <code>m</code> is equal to 0, it will not be possible to create any partitions of size <code>n</code> (other than <code>0</code>). For <code>n = 0</code>, you can create <code>1</code> total partition by using partition size <code>0</code> (which is still less than <code>m</code>).</p>
<p>As a result, the code can be written as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">count_partitions</span>(n, m):
    <span style="color:#66d9ef">if</span> n <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>
    <span style="color:#66d9ef">elif</span> n <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">or</span> m <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">return</span> count_partitions(n <span style="color:#f92672">-</span> m, m) <span style="color:#f92672">+</span> count_partitions(n, m <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)
</code></pre></div></article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#order-of-recursive-calls">Order of Recursive Calls</a></li>
    <li><a href="#tree-recursion-1">Tree Recursion</a>
      <ul>
        <li><a href="#fibonacci-numbers">Fibonacci Numbers</a></li>
      </ul>
    </li>
    <li><a href="#counting-partitions">Counting Partitions</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












