<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Calculator Language#Compiled vs Interpreted#High Level Languages (basically languages with a lot of abstraction from machine code - essentially 1s and 0s) are typically either compiled or interpreted.
Compiling#When a program is compiled, the source code is directly translated to machine code right from the start - this code can then be distributed and run repeatedly.
Interpreted#When a program is interpreted, the source code is run directly without first compiling it.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="Calculator" />
<meta property="og:description" content="Calculator Language#Compiled vs Interpreted#High Level Languages (basically languages with a lot of abstraction from machine code - essentially 1s and 0s) are typically either compiled or interpreted.
Compiling#When a program is compiled, the source code is directly translated to machine code right from the start - this code can then be distributed and run repeatedly.
Interpreted#When a program is interpreted, the source code is run directly without first compiling it." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cs61a.rouxl.es/docs/week-11/content/calculator/" /><meta property="article:section" content="docs" />



<title>Calculator | CS61A Notes</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.87312a22c120b2e99e4dbec51f671dd6b1cb0bed3b12a909c39a0aa981eb5a8f.css" integrity="sha256-hzEqIsEgsumeTb7FH2cd1rHLC&#43;07EqkJw5oKqYHrWo8=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.48fde40e3f221882d6fdfc795c46bba349e982b0d7c7cac980fd02ecc6e81347.js" integrity="sha256-SP3kDj8iGILW/fx5XEa7o0npgrDXx8rJgP0C7MboE0c=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>CS61A Notes</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  



  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 1</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-1/content/introduction/" class="">Introduction to the Basics of Python</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 2</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-2/content/control/" class="">Control</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-2/content/higher-order-functions/" class="">Higher Order Functions</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-2/content/environment/" class="">Environment Diagrams</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 3</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-3/content/design/" class="">Design</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-3/content/decorators/" class="">Decorators</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 4</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-4/content/recursion/" class="">Recursion</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-4/content/tree-recursion/" class="">Tree Recursion</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 5</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-5/content/containers/" class="">Containers</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-5/content/sequences/" class="">Sequences</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-5/content/data-abstraction/" class="">Data Abstraction &#43; Dictionaries</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 6</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-6/content/trees/" class="">Trees</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-6/content/mutability/" class="">Mutability</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 7</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-7/content/iterators/" class="">Iterators</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-7/content/generators/" class="">Generators</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-7/content/objects/" class="">Objects</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 8</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-8/content/inheritance/" class="">Inheritance</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-8/content/representation/" class="">Representation</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-8/content/recursive-data/" class="">Recursive Data</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 9</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-9/content/efficiency/" class="">Efficiency</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-10/" class="">Week 10</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 11</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-11/content/scheme/" class="">Scheme</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-11/content/macros-and-exceptions/" class="">Macros &#43; Exceptions</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-11/content/calculator/" class=" active">Calculator</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Week 12</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-12/content/interpreters/" class="">Interpreters</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-12/content/tail-calls/" class="">Tail Calls</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/week-13/" class="">Week 13</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>How To Succeed</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/succeed/content/general-tips/" class="">General Tips</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/succeed/content/midterm-1/" class="">Midterm 1</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/succeed/content/midterm-2/" class="">Midterm 2</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/succeed/content/finals/" class="">Finals</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="https://cs61a.rouxl.es/docs/contributors/" class="">Contributors</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Calculator</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#compiled-vs-interpreted">Compiled vs Interpreted</a>
      <ul>
        <li><a href="#compiling">Compiling</a></li>
        <li><a href="#interpreted">Interpreted</a></li>
      </ul>
    </li>
    <li><a href="#phases-of-an-interpreter">Phases of an Interpreter</a></li>
    <li><a href="#lexing-and-parsing">Lexing and Parsing</a>
      <ul>
        <li><a href="#lexical-analysis">Lexical Analysis</a></li>
        <li><a href="#syntactic-analysis">Syntactic Analysis</a></li>
      </ul>
    </li>
    <li><a href="#pair-class">Pair Class</a></li>
  </ul>

  <ul>
    <li><a href="#syntax">Syntax</a></li>
    <li><a href="#semantics">Semantics</a></li>
    <li><a href="#evaluation">Evaluation</a>
      <ul>
        <li><a href="#calc_eval"><code>calc_eval</code></a></li>
        <li><a href="#calc_apply"><code>calc_apply</code></a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="calculator-language">
  Calculator Language
  <a class="anchor" href="#calculator-language">#</a>
</h1>
<h2 id="compiled-vs-interpreted">
  Compiled vs Interpreted
  <a class="anchor" href="#compiled-vs-interpreted">#</a>
</h2>
<p>High Level Languages (basically languages with a lot of abstraction from machine code - essentially 1s and 0s) are typically either <strong>compiled</strong> or <strong>interpreted</strong>.</p>
<h3 id="compiling">
  Compiling
  <a class="anchor" href="#compiling">#</a>
</h3>
<p>When a program is compiled, the source code is directly translated to machine code right from the start - this code can then be distributed and run repeatedly.</p>
<h3 id="interpreted">
  Interpreted
  <a class="anchor" href="#interpreted">#</a>
</h3>
<p>When a program is interpreted, the source code is run directly without first compiling it. This gives interpreted languages more overhead, but also makes it such that you remove the time needed for compilation.</p>
<h2 id="phases-of-an-interpreter">
  Phases of an Interpreter
  <a class="anchor" href="#phases-of-an-interpreter">#</a>
</h2>
<p>In order to interpret source code, programs need to be written to understand said source code.</p>
<p>A usual method is the following:</p>
<p><code>Source Code -&gt; Lexing -&gt; Parsing -&gt; Abstract Syntax Tree</code></p>
<h2 id="lexing-and-parsing">
  Lexing and Parsing
  <a class="anchor" href="#lexing-and-parsing">#</a>
</h2>
<p>The way to parse a scheme expression is to first collect the tokens of that expression (lexing), then turning it into a form readable by the language that it is to be interpreted by.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">(<span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> (<span style="color:#f92672">*</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span>)) <span style="color:#f92672">-&gt;</span> Scheme Expression
[<span style="color:#e6db74">&#39;(&#39;</span>, <span style="color:#e6db74">&#39;+&#39;</span>, <span style="color:#e6db74">&#39;1&#39;</span>, <span style="color:#e6db74">&#39;(&#39;</span>, <span style="color:#e6db74">&#39;*&#39;</span>, <span style="color:#e6db74">&#39;3&#39;</span>, <span style="color:#e6db74">&#39;4&#39;</span>, <span style="color:#e6db74">&#39;)&#39;</span>, <span style="color:#e6db74">&#39;)&#39;</span>] <span style="color:#f92672">-&gt;</span> Tokenized
Pair(<span style="color:#e6db74">&#39;+&#39;</span>, Pair(<span style="color:#ae81ff">1</span>, Pair(Pair([<span style="color:#f92672">...</span>])))) <span style="color:#f92672">-&gt;</span> Parsed
</code></pre></div><h3 id="lexical-analysis">
  Lexical Analysis
  <a class="anchor" href="#lexical-analysis">#</a>
</h3>
<p>Lexical Analysis is the process of turning an expression to its tokens. For example, the code block above shows lexical analysis of the phrase <code>(+ 1 (* 3 4))</code> to our tokens <code>['(', '+', '1', '(', '*', '3', '4', ')', ')']</code>.</p>
<p>This process is iterative, and processes lines one at a time.</p>
<h3 id="syntactic-analysis">
  Syntactic Analysis
  <a class="anchor" href="#syntactic-analysis">#</a>
</h3>
<p>The syntactic analysis turns our tokens into a parsed form that is readable by programs. For example, the <code>Pair</code> class is used in the Python interpreted version of the calculator language.</p>
<p>This process is tree-recursive - it eventually returns a tree-like structure using linked lists and then processes multiple lines.</p>
<h2 id="pair-class">
  Pair Class
  <a class="anchor" href="#pair-class">#</a>
</h2>
<p>The Pair class is what&rsquo;s used in CS61A to represent scheme lists.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">s <span style="color:#f92672">=</span> Pair(<span style="color:#ae81ff">1</span>, Pair(<span style="color:#ae81ff">2</span>, Pair(<span style="color:#ae81ff">3</span>, nil)))
print(s)  <span style="color:#75715e"># (1 2 3)</span>
len(s)    <span style="color:#75715e"># 3</span>
</code></pre></div><h1 id="calculator-language-1">
  Calculator Language
  <a class="anchor" href="#calculator-language-1">#</a>
</h1>
<p>Programming languages have the following features:</p>
<ul>
<li>Syntax: The statements and expressions in the code</li>
<li>Semantics: The rules for evaluation within those statements and expressions</li>
</ul>
<p>When creating a new programming language, we need the following things:</p>
<ul>
<li>Documentation (for how to use the program)</li>
<li>Canonical Implementation (an interpreter/compiler for the language)</li>
</ul>
<h2 id="syntax">
  Syntax
  <a class="anchor" href="#syntax">#</a>
</h2>
<p>Our calculator expression will only have primitive expressions (numbers) and call expressions (+, -, *, /) with nothing else. This will give us the power to write mathematical expressions in scheme, then parse it using our parser.</p>
<p><img src="https://i.imgur.com/42SE4Hn.png" alt="" /></p>
<p>The image above shows an example of an expression and the lexing and parsing that occurs from it.</p>
<h2 id="semantics">
  Semantics
  <a class="anchor" href="#semantics">#</a>
</h2>
<p>The evaluation rules for a calculation expression is defined recursively.</p>
<ul>
<li>Primitive: expresses to itself</li>
<li>Call Expression: Evaluates to its operator applied on its operands.</li>
</ul>
<p>If we look at the expression tree above, whenever there&rsquo;s a box, we need to evaluate the result from said box (which keeps going down until there are no more boxes to evaluate)</p>
<h2 id="evaluation">
  Evaluation
  <a class="anchor" href="#evaluation">#</a>
</h2>
<p>This evaluation function computes the value of our expression. This function basically just looks at the data type then applies a different rule.</p>
<h3 id="calc_eval">
  <code>calc_eval</code>
  <a class="anchor" href="#calc_eval">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">calc_eval</span>(exp):
    <span style="color:#66d9ef">if</span> isinstance(exp, (int, float)):
        <span style="color:#66d9ef">return</span> exp <span style="color:#75715e"># if number, just give back a number</span>
    <span style="color:#66d9ef">elif</span> isinstance(exp, Pair):
        arguments <span style="color:#f92672">=</span> exp<span style="color:#f92672">.</span>rest<span style="color:#f92672">.</span>map(calc_eval) <span style="color:#75715e"># evaluate the rest of the arguments in the pair</span>
        <span style="color:#66d9ef">return</span> calc_apply(exp<span style="color:#f92672">.</span>first, arguments) <span style="color:#75715e"># apply the operator to the operands</span>
    <span style="color:#66d9ef">else</span>:
        <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">TypeError</span>
</code></pre></div><h3 id="calc_apply">
  <code>calc_apply</code>
  <a class="anchor" href="#calc_apply">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">calc_apply</span>(operator, args):
    <span style="color:#66d9ef">if</span> operator <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;+&#39;</span>:
        <span style="color:#66d9ef">return</span> reduce(add, args, <span style="color:#ae81ff">0</span>)
    <span style="color:#66d9ef">elif</span> operator <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;-&#39;</span>:
        <span style="color:#f92672">...</span>
    <span style="color:#66d9ef">elif</span> operator <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;*&#39;</span>:
        <span style="color:#f92672">...</span>
    <span style="color:#66d9ef">elif</span> operator <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;/&#39;</span>:
        <span style="color:#f92672">...</span>
    <span style="color:#66d9ef">else</span>:
        <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">TypeError</span>
</code></pre></div></article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#compiled-vs-interpreted">Compiled vs Interpreted</a>
      <ul>
        <li><a href="#compiling">Compiling</a></li>
        <li><a href="#interpreted">Interpreted</a></li>
      </ul>
    </li>
    <li><a href="#phases-of-an-interpreter">Phases of an Interpreter</a></li>
    <li><a href="#lexing-and-parsing">Lexing and Parsing</a>
      <ul>
        <li><a href="#lexical-analysis">Lexical Analysis</a></li>
        <li><a href="#syntactic-analysis">Syntactic Analysis</a></li>
      </ul>
    </li>
    <li><a href="#pair-class">Pair Class</a></li>
  </ul>

  <ul>
    <li><a href="#syntax">Syntax</a></li>
    <li><a href="#semantics">Semantics</a></li>
    <li><a href="#evaluation">Evaluation</a>
      <ul>
        <li><a href="#calc_eval"><code>calc_eval</code></a></li>
        <li><a href="#calc_apply"><code>calc_apply</code></a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












